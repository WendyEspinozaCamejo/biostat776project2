---
title: "Biostat776project2"
author: "Wendy Espinoza Camejo"
date: "2023-09-25"
output: html_document
---

```{r}
library(tidyverse)
library(tidytuesdayR)
```

### Part 1: Fun with functions
1A. Exponential transformation 
Write a function that computes the exponential of a number using the truncated series expansion. The function should take two arguments:
x: the number to be exponentiated
k: the number of terms to be used in the series expansion beyond the constant 1. The value of k is always.
```{r}
Exp <- function(x, k){
  k <- 1:k
  sum(x^k/(factorial(k)))
}
Exp(2,5)
```

1B. Sample mean and sample standard deviation
Next, write two functions called sample_mean() and sample_sd() that takes as input a vector of data of length and calculates the sample average and sample standard deviation for the set of observations.
```{r}
sample_mean <- function(x) {
  N <- length(x)
  sum(x, na.rm = TRUE)/N
}

sample_sd <- function(x) {
  N <- length(x)
  sqrt(sum((x - sample_mean(x))^2)/(N-1))
}
sample_mean(2:100)
sample_sd(2:100)

```
#####I need to double check this answer: OJO

1C. Confidence intervals 
```{r}
calculate_CI <- function(x, conf) {
    N <-length(x)
    alpha <- 1 - 0.95
  degrees_freedom <- N - 1
  #t_score <- qt(p = alpha / 2, df = degrees_freedom, lower.tail = FALSE)
  lower_bound <- sample_mean(x)- 1.95*sample_sd(x)
  upper_bound <- sample_mean(x)+ 1.95*sample_sd(x)
  bound <- c(lower_bound, upper_bound)
  #print(t_score)
  print(bound)
}

 calculate_CI(1:100, conf = 0.95)
```
######Talk with the professor to see if you need to add the t_score in this solution. cause I get the same values with and without this the t_score script.
I don't get this part of the project; it is giving me an error.
```{r}
#calculate_CI(1:100, conf = 0.95)
#dat <- data.frame(x = x)
#fit <- lm(x ~ 1, dat)

# Calculate a 95% confidence interval
#confint(fit, level = 0.95)
```

### Part 2: Wrangling data
```{r}
tuesdata <- tidytuesdayR::tt_load("2020-01-07")
rainfall <- tuesdata$rainfall
temperature <- tuesdata$temperature
library(here)
if (!file.exists(here("data", "tuesdata_rainfall.RDS"))) {
    tuesdata <- tidytuesdayR::tt_load("2020-01-07")
    rainfall <- tuesdata$rainfall
    temperature <- tuesdata$temperature

    # save the files to RDS objects
    saveRDS(tuesdata$rainfall, file = here("data", "tuesdata_rainfall.RDS"))
    saveRDS(tuesdata$temperature, file = here("data", "tuesdata_temperature.RDS"))
}
rainfall <- readRDS(here("data", "tuesdata_rainfall.RDS"))
temperature <- readRDS(here("data", "tuesdata_temperature.RDS"))
library(tidyverse)

glimpse(rainfall)
glimpse(temperature)
```
Using the rainfall and temperature data, perform the following steps and create a new data frame called df:

1. Start with rainfall dataset and drop any rows with NAs.
2. Create a new column titled date that combines the columns year, month, day into one column separated by “-”. (e.g. “2020-01-01”). This column should not be a character, but should be recognized as a date. (Hint: check out the ymd() function in lubridate R package). You will also want to add a column that just keeps the year.
3. Using the city_name column, convert the city names (character strings) to all upper case.
4. Join this wrangled rainfall dataset with the temperature dataset such that it includes only observations that are in both data frames. (Hint: there are two keys that you will need to join the two datasets together). (Hint: If all has gone well thus far, you should have a dataset with 83,964 rows and 13 columns).
```{r}

```

### Part 3: Data visualization 
3A. Plotting temperature data over time 

```{r}

```

3B. Plotting rainfall over time

```{r}

```

### Part 4: Apply functions and plot
4A: Tasks
```{r}

```

4B: Tasks
```{r}

```

```{r}
options(width = 120)
sessioninfo::session_info()
```


